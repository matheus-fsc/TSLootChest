## How the Plugin Works

The TSLootChest plugin allows each player to have individual loot chests on the Terraria map, ensuring that loot is unique per player and preventing loot scarcity.

#### General Functionality
- **Initialization:** The plugin initializes by creating a database to track player-placed chests, storing the chest's coordinates and status. It also identifies chests generated by the map for special handling.
- **Chest Protection:** Prevents players from breaking naturally generated chests, which are restored upon closing to retain items individually for each player. However, players can break chests placed by others.
- **Item Restoration:** When a player closes a naturally generated loot chest, the plugin automatically restores items based on stored item IDs and quantities. This data is stored temporarily and deleted once the chest is closed.
- **Synchronization:** Ensures that operations on chests are thread-safe to avoid conflicts or bugs when restoring items.

### Available Commands for Players

1. **Add Chest**
   - **Command**: `/addchest <X> <Y>`
   - **Description**: Adds a chest at the specified coordinates if a valid chest exists.
   - **Example**: `/addchest 100 150`

2. **Remove Chest**
   - **Command**: `/remchest <X> <Y>`
   - **Description**: Removes a chest at the specified coordinates if the chest was placed by a player.
   - **Example**: `/remchest 100 150`

3. **Toggle Chest Log**
   - **Command**: `/togglelogchest`
   - **Description**: Enables or disables the logging of chest coord openings.
   - **Example**: `/togglelogchest`

### Additional Information

- The purpose of the commands is primarily for cases where the plugin is implemented in an existing world with pre-existing chests. In such cases, the log is activated to capture the chest coordinates by interacting with it using the right-click and then adding it with `/addchest` to make it a player chest. This step is necessary as the plugin cannot automatically identify player chests unless they are added to the database. To assist players in checking the coordinates, they can use the `/togglelogchest` command to enable logging and interact with the chest to view the coordinates, then add it as a player chest with `/addchest` using the displayed coordinates.
- The plugin logs key events, such as placing and removing chests, providing traceability for player actions.
- Since Terraria already prevents multiple players from accessing a chest at the same time, this plugin enhances that functionality by storing individual loot for each player to prevent conflicts and duplications.

For more details, you can check the code files directly in the repository:
- [Plugin Configuration](https://github.com/matheus-fsc/TSLootChest/blob/main/LootChest/Logicas/Config.cs)
- [Command Definitions](https://github.com/matheus-fsc/TSLootChest/blob/main/LootChest/Logicas/Comandos.cs)
- [Main Plugin Logic](https://github.com/matheus-fsc/TSLootChest/blob/main/LootChest/Logicas/LootChest.cs)
- [Chest Database](https://github.com/matheus-fsc/TSLootChest/blob/main/LootChest/Logicas/ChestDatabase%20.cs)
